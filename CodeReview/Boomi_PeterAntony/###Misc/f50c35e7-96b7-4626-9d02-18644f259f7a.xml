<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bns:Component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bns="http://api.platform.boomi.com/" folderFullPath="Boomi_PeterAntony/###Misc" componentId="f50c35e7-96b7-4626-9d02-18644f259f7a" version="166" name="[wsvc] IP Address" type="process" createdDate="2022-07-18T09:08:02Z" createdBy="peterantony@boomi.com" modifiedDate="2024-06-11T08:01:49Z" modifiedBy="peterantony@boomi.com" deleted="false" currentVersion="true" folderName="###Misc" folderId="RjoyNzY4MjI5" branchName="main" branchId="Qjo0NjgxMw">
  <bns:encryptedValues/>
  <bns:description/>
  <bns:object>
    <process xmlns="" allowSimultaneous="true" enableUserLog="false" processLogOnErrorOnly="true" purgeDataImmediately="false" updateRunDates="false" workload="low_latency">
      <shapes>
        <shape image="start" name="shape1" shapetype="start" userlabel="" x="48.0" y="46.0">
          <configuration>
            <connectoraction actionType="Listen" allowDynamicCredentials="NONE" connectorType="wss" hideSettings="true" operationId="bc1be9c1-853c-4439-9982-e219d22fffe4">
              <parameters/>
              <dynamicProperties/>
            </connectoraction>
          </configuration>
          <dragpoints>
            <dragpoint name="shape1.dragpoint1" toShape="shape20" x="224.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="documentproperties_icon" name="shape20" shapetype="documentproperties" userlabel="Logger - Execution Properties" x="240.0" y="48.0">
          <configuration>
            <documentproperties>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_ATOM_ID" persist="false" propertyId="process.DPP_LOG_ATOM_ID" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="3" valueType="execution">
                    <executionparameter executionproperty="Atom Id"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_ATOM_NAME" persist="false" propertyId="process.DPP_LOG_ATOM_NAME" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="4" valueType="execution">
                    <executionparameter executionproperty="Atom Name"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_ACCOUNT_ID" persist="false" propertyId="process.DPP_LOG_ACCOUNT_ID" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="5" valueType="execution">
                    <executionparameter executionproperty="Account Id"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_HEADER_AUTHORIZATION" persist="false" propertyId="process.DPP_LOG_HEADER_AUTHORIZATION" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="7" valueType="track">
                    <trackparameter defaultValue="" propertyId="dynamicdocument.inheader_Authorization" propertyName="Dynamic Document Property - inheader_Authorization"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_HEADER_APIKEY" persist="false" propertyId="process.DPP_LOG_HEADER_APIKEY" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="8" valueType="track">
                    <trackparameter defaultValue="" propertyId="dynamicdocument.inheader_x-api-key" propertyName="Dynamic Document Property - inheader_x-api-key"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_HEADER_USER_AGENT" persist="false" propertyId="process.DPP_LOG_HEADER_USER_AGENT" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="9" valueType="track">
                    <trackparameter defaultValue="" propertyId="dynamicdocument.inheader_User_Agent" propertyName="Dynamic Document Property - inheader_User_Agent"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_PROCESS_NAME" persist="false" propertyId="process.DPP_LOG_PROCESS_NAME" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="10" valueType="execution">
                    <executionparameter executionproperty="Process Name"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_EXECUTION_ID" persist="false" propertyId="process.DPP_LOG_EXECUTION_ID" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="11" valueType="execution">
                    <executionparameter executionproperty="Execution Id"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_NODE_ID" persist="false" propertyId="process.DPP_LOG_NODE_ID" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="12" valueType="execution">
                    <executionparameter executionproperty="Node Id"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_SOURCE" persist="false" propertyId="process.DPP_LOG_SOURCE" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="13" valueType="crossref">
                    <crossrefparameter crossRefTableId="a4ce30ed-3075-450a-b8b0-224f3e57a848" outputParamId="2" outputParamName="AppName">
                      <inputs>
                        <parametervalue elementToSetId="1" elementToSetName="AppKey" key="0" valueType="static">
                          <staticparameter staticproperty="SFDC"/>
                        </parametervalue>
                      </inputs>
                    </crossrefparameter>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_LOG_TARGET" persist="false" propertyId="process.DPP_LOG_TARGET" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="14" valueType="crossref">
                    <crossrefparameter crossRefTableId="a4ce30ed-3075-450a-b8b0-224f3e57a848" outputParamId="2" outputParamName="AppName">
                      <inputs>
                        <parametervalue elementToSetId="1" elementToSetName="AppKey" key="0" valueType="static">
                          <staticparameter staticproperty="Sample App"/>
                        </parametervalue>
                      </inputs>
                    </crossrefparameter>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - DPP_CORRELATION_ID" persist="false" propertyId="process.DPP_CORRELATION_ID" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="17" valueType="unique"/>
                </sourcevalues>
              </documentproperty>
            </documentproperties>
          </configuration>
          <dragpoints>
            <dragpoint name="shape20.dragpoint1" toShape="shape41" x="416.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="dataprocess_icon" name="shape39" shapetype="dataprocess" userlabel="Get IP Address (XFF)" x="816.0" y="48.0">
          <configuration>
            <dataprocess>
              <step index="1" key="1" name="Custom Scripting" processtype="12">
                <dataprocessscript language="groovy2">
                  <script>import java.util.Properties;&#13;
import java.io.InputStream;&#13;
import com.boomi.execution.ExecutionUtil;&#13;
&#13;
&#13;
logger = ExecutionUtil.getBaseLogger();&#13;
&#13;
for( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {&#13;
    InputStream is = dataContext.getStream(i);&#13;
    Properties props = dataContext.getProperties(i);&#13;
    def IP = InetAddress.getLocalHost().getHostAddress();&#13;
    ExecutionUtil.setDynamicProcessProperty("dppIP", IP, false);&#13;
    dataContext.storeStream(is, props);&#13;
}</script>
                </dataprocessscript>
              </step>
            </dataprocess>
          </configuration>
          <dragpoints>
            <dragpoint name="shape39.dragpoint1" toShape="shape44" x="992.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="documentproperties_icon" name="shape41" shapetype="documentproperties" userlabel="" x="432.0" y="48.0">
          <configuration>
            <documentproperties>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - dppAPIPath" persist="false" propertyId="process.dppAPIPath" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="1" valueType="process">
                    <processparameter processproperty="inpath" processpropertydefaultvalue=""/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - dppSleep" persist="false" propertyId="process.dppSleep" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="2" valueType="static">
                    <staticparameter staticproperty="3"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
            </documentproperties>
          </configuration>
          <dragpoints>
            <dragpoint name="shape41.dragpoint1" toShape="shape42" x="608.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="dataprocess_icon" name="shape42" shapetype="dataprocess" userlabel="Sleep" x="624.0" y="48.0">
          <configuration>
            <dataprocess>
              <step index="1" key="1" name="Custom Scripting" processtype="12">
                <dataprocessscript componentId="f864586a-3438-44b7-8804-b8901ff1a4c5" language="groovy2" useCache="true" useComponent="true">
                  <script>import java.util.Properties;
import java.io.InputStream;

for( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {
    InputStream is = dataContext.getStream(i);
    Properties props = dataContext.getProperties(i);

    dataContext.storeStream(is, props);
}</script>
                </dataprocessscript>
              </step>
            </dataprocess>
          </configuration>
          <dragpoints>
            <dragpoint name="shape42.dragpoint1" toShape="shape39" x="800.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="message_icon" name="shape44" shapetype="message" userlabel="" x="1008.0" y="48.0">
          <configuration>
            <message combined="false">
              <msgTxt>IP Address: {1}</msgTxt>
              <msgParameters>
                <parametervalue key="0" valueType="process">
                  <processparameter processproperty="dppIP" processpropertydefaultvalue=""/>
                </parametervalue>
              </msgParameters>
            </message>
          </configuration>
          <dragpoints>
            <dragpoint name="shape44.dragpoint1" toShape="shape51" x="1184.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="catcherrors_icon" name="shape46" shapetype="catcherrors" userlabel="" x="48.0" y="208.0">
          <configuration>
            <catcherrors catchAll="true" retryCount="0"/>
          </configuration>
          <dragpoints>
            <dragpoint identifier="default" name="shape46.dragpoint1" text="Try" toShape="shape47" x="224.0" y="216.0"/>
            <dragpoint identifier="error" name="shape46.dragpoint2" text="Catch" toShape="shape48" x="224.0" y="376.0"/>
          </dragpoints>
        </shape>
        <shape image="connectoraction_icon" name="shape47" shapetype="connectoraction" userlabel="" x="240.0" y="208.0">
          <configuration>
            <connectoraction actionType="Get" allowDynamicCredentials="NONE" connectionId="34674f89-c297-43b8-ab9c-b8da5161fd85" connectorType="database" hideSettings="false" operationId="a107ea73-833e-4891-9463-a41926f674f3" parameter-profile="EMBEDDED|databaseparameterchooser|a45a1531-8b73-45c5-9388-e98ff2f98489|a107ea73-833e-4891-9463-a41926f674f3">
              <parameters>
                <parametervalue elementToSetId="11" elementToSetName="pShapeBegin" name="pShapeBegin" valueType="static">
                  <staticparameter staticproperty=""/>
                </parametervalue>
              </parameters>
              <dynamicProperties/>
            </connectoraction>
          </configuration>
          <dragpoints>
            <dragpoint name="shape47.dragpoint1" toShape="unset" x="416.0" y="90.0"/>
          </dragpoints>
        </shape>
        <shape image="message_icon" name="shape48" shapetype="message" userlabel="" x="240.0" y="368.0">
          <configuration>
            <message combined="false">
              <msgTxt>'{
"ErrorCode" :"100",
"Message" :"{1}"
}'</msgTxt>
              <msgParameters>
                <parametervalue key="0" valueType="track">
                  <trackparameter defaultValue="" propertyId="dynamicdocument.ddpBase" propertyName="Dynamic Document Property - ddpBase"/>
                </parametervalue>
              </msgParameters>
            </message>
          </configuration>
          <dragpoints>
            <dragpoint name="shape48.dragpoint1" toShape="shape53" x="416.0" y="376.0"/>
          </dragpoints>
        </shape>
        <shape image="documentproperties_icon" name="shape49" shapetype="documentproperties" userlabel="" x="48.0" y="528.0">
          <configuration>
            <documentproperties>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Document Property - ddpBase" persist="false" propertyId="dynamicdocument.ddpBase" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="1" valueType="track">
                    <trackparameter defaultValue="" propertyId="meta.base.catcherrorsmessage" propertyName="Base - Try/Catch Message"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
            </documentproperties>
          </configuration>
          <dragpoints>
            <dragpoint name="shape49.dragpoint1" toShape="unset" x="224.0" y="218.0"/>
          </dragpoints>
        </shape>
        <shape image="returndocuments_icon" name="shape51" shapetype="returndocuments" x="1200.0" y="48.0">
          <configuration>
            <returndocuments/>
          </configuration>
          <dragpoints/>
        </shape>
        <shape image="exception_icon" name="shape53" shapetype="exception" userlabel="" x="432.0" y="368.0">
          <configuration>
            <exception stopProcessReturnSingleDoc="false" stopsingledoc="true" title="">
              <exMessage/>
              <exParameters/>
            </exception>
          </configuration>
          <dragpoints/>
        </shape>
      </shapes>
    </process>
  </bns:object>
  <bns:processOverrides/>
</bns:Component>
