<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bns:Component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bns="http://api.platform.boomi.com/" folderFullPath="Boomi_PeterAntony/###Misc" componentId="f50c35e7-96b7-4626-9d02-18644f259f7a" version="183" name="[wsvc] IP Address" type="process" createdDate="2022-07-18T09:08:02Z" createdBy="peterantony@boomi.com" modifiedDate="2024-06-18T07:47:56Z" modifiedBy="peterantony@boomi.com" deleted="false" currentVersion="true" folderName="###Misc" folderId="RjoyNzY4MjI5" branchName="main" branchId="Qjo0NjgxMw">
  <bns:encryptedValues/>
  <bns:description/>
  <bns:object>
    <process xmlns="" allowSimultaneous="true" enableUserLog="false" processLogOnErrorOnly="false" purgeDataImmediately="false" updateRunDates="false" workload="bridge">
      <shapes>
        <shape image="start" name="shape1" shapetype="start" userlabel="" x="48.0" y="46.0">
          <configuration>
            <connectoraction actionType="Listen" allowDynamicCredentials="NONE" connectorType="wss" hideSettings="true" operationId="bc1be9c1-853c-4439-9982-e219d22fffe4">
              <parameters/>
              <dynamicProperties/>
            </connectoraction>
          </configuration>
          <dragpoints>
            <dragpoint name="shape1.dragpoint1" toShape="shape41" x="224.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="dataprocess_icon" name="shape39" shapetype="dataprocess" userlabel="Get IP Address (XFF)" x="624.0" y="48.0">
          <configuration>
            <dataprocess>
              <step index="1" key="1" name="Custom Scripting" processtype="12">
                <dataprocessscript language="groovy2">
                  <script>import java.util.Properties;&#13;
import java.io.InputStream;&#13;
import com.boomi.execution.ExecutionUtil;&#13;
&#13;
&#13;
logger = ExecutionUtil.getBaseLogger();&#13;
&#13;
for( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {&#13;
    InputStream is = dataContext.getStream(i);&#13;
    Properties props = dataContext.getProperties(i);&#13;
    def IP = InetAddress.getLocalHost().getHostAddress();&#13;
    ExecutionUtil.setDynamicProcessProperty("dppIP", IP, false);&#13;
    dataContext.storeStream(is, props);&#13;
}</script>
                </dataprocessscript>
              </step>
            </dataprocess>
          </configuration>
          <dragpoints>
            <dragpoint name="shape39.dragpoint1" toShape="shape44" x="800.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="documentproperties_icon" name="shape41" shapetype="documentproperties" userlabel="" x="240.0" y="48.0">
          <configuration>
            <documentproperties>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - dppAPIPath" persist="false" propertyId="process.dppAPIPath" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="1" valueType="process">
                    <processparameter processproperty="inpath" processpropertydefaultvalue=""/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - dppSleep" persist="false" propertyId="process.dppSleep" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="2" valueType="static">
                    <staticparameter staticproperty="3"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
            </documentproperties>
          </configuration>
          <dragpoints>
            <dragpoint name="shape41.dragpoint1" toShape="shape42" x="416.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="dataprocess_icon" name="shape42" shapetype="dataprocess" userlabel="Sleep" x="432.0" y="48.0">
          <configuration>
            <dataprocess>
              <step index="1" key="1" name="Custom Scripting" processtype="12">
                <dataprocessscript componentId="f864586a-3438-44b7-8804-b8901ff1a4c5" language="groovy2" useCache="true" useComponent="true">
                  <script>import java.util.Properties;
import java.io.InputStream;

for( int i = 0; i &lt; dataContext.getDataCount(); i++ ) {
    InputStream is = dataContext.getStream(i);
    Properties props = dataContext.getProperties(i);

    dataContext.storeStream(is, props);
}</script>
                </dataprocessscript>
              </step>
            </dataprocess>
          </configuration>
          <dragpoints>
            <dragpoint name="shape42.dragpoint1" toShape="shape39" x="608.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="message_icon" name="shape44" shapetype="message" userlabel="" x="816.0" y="48.0">
          <configuration>
            <message combined="false">
              <msgTxt>IP Address: {1}</msgTxt>
              <msgParameters>
                <parametervalue key="0" valueType="process">
                  <processparameter processproperty="dppIP" processpropertydefaultvalue=""/>
                </parametervalue>
              </msgParameters>
            </message>
          </configuration>
          <dragpoints>
            <dragpoint name="shape44.dragpoint1" toShape="shape65" x="992.0" y="56.0"/>
          </dragpoints>
        </shape>
        <shape image="catcherrors_icon" name="shape46" shapetype="catcherrors" userlabel="" x="240.0" y="208.0">
          <configuration>
            <catcherrors catchAll="true" retryCount="0"/>
          </configuration>
          <dragpoints>
            <dragpoint identifier="default" name="shape46.dragpoint1" text="Try" toShape="shape47" x="416.0" y="216.0"/>
            <dragpoint identifier="error" name="shape46.dragpoint2" text="Catch" toShape="shape60" x="416.0" y="376.0"/>
          </dragpoints>
        </shape>
        <shape image="connectoraction_icon" name="shape47" shapetype="connectoraction" userlabel="" x="432.0" y="208.0">
          <configuration>
            <connectoraction actionType="Get" allowDynamicCredentials="NONE" connectionId="34674f89-c297-43b8-ab9c-b8da5161fd85" connectorType="database" hideSettings="false" operationId="a107ea73-833e-4891-9463-a41926f674f3" parameter-profile="EMBEDDED|databaseparameterchooser|a45a1531-8b73-45c5-9388-e98ff2f98489|a107ea73-833e-4891-9463-a41926f674f3">
              <parameters>
                <parametervalue elementToSetId="11" elementToSetName="pShapeBegin" name="pShapeBegin" valueType="static">
                  <staticparameter staticproperty=""/>
                </parametervalue>
              </parameters>
              <dynamicProperties/>
            </connectoraction>
          </configuration>
          <dragpoints>
            <dragpoint name="shape47.dragpoint1" toShape="shape59" x="608.0" y="216.0"/>
          </dragpoints>
        </shape>
        <shape image="processcall_icon" name="shape58" shapetype="processcall" userlabel="" x="624.0" y="368.0">
          <configuration>
            <processcall abort="true" processId="0cfa3935-557c-4dc4-9d79-8e6c0cd15bc3" wait="true">
              <parameters/>
              <returnpaths/>
            </processcall>
          </configuration>
          <dragpoints/>
        </shape>
        <shape image="stop_icon" name="shape59" shapetype="stop" userlabel="" x="624.0" y="208.0">
          <configuration>
            <stop continue="true"/>
          </configuration>
          <dragpoints/>
        </shape>
        <shape image="documentproperties_icon" name="shape60" shapetype="documentproperties" userlabel="Set Error" x="432.0" y="368.0">
          <configuration>
            <documentproperties>
              <documentproperty defaultValue="" isDynamicCredential="false" isTradingPartner="false" name="Dynamic Process Property - dppMsg" persist="false" propertyId="process.dppMsg" shouldEncrypt="false">
                <sourcevalues>
                  <parametervalue key="1" valueType="track">
                    <trackparameter defaultValue="" propertyId="meta.base.catcherrorsmessage" propertyName="Base - Try/Catch Message"/>
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
            </documentproperties>
          </configuration>
          <dragpoints>
            <dragpoint name="shape60.dragpoint1" toShape="shape58" x="608.0" y="376.0"/>
          </dragpoints>
        </shape>
        <shape image="catcherrors_icon" name="shape61" shapetype="catcherrors" userlabel="" x="48.0" y="208.0">
          <configuration>
            <catcherrors catchAll="true" retryCount="0"/>
          </configuration>
          <dragpoints>
            <dragpoint identifier="default" name="shape61.dragpoint1" text="Try" toShape="shape46" x="224.0" y="216.0"/>
            <dragpoint identifier="error" name="shape61.dragpoint2" text="Catch" toShape="shape64" x="224.0" y="536.0"/>
          </dragpoints>
        </shape>
        <shape image="returndocuments_icon" name="shape62" shapetype="returndocuments" x="432.0" y="528.0">
          <configuration>
            <returndocuments/>
          </configuration>
          <dragpoints/>
        </shape>
        <shape image="processcall_icon" name="shape64" shapetype="processcall" userlabel="" x="240.0" y="528.0">
          <configuration>
            <processcall abort="true" processId="fa0cf21e-a02f-44c7-80be-c9bc07ee2573" wait="true">
              <parameters/>
              <returnpaths>
                <returnpaths childShapeName="shape2" returnLabel=""/>
              </returnpaths>
            </processcall>
          </configuration>
          <dragpoints>
            <dragpoint identifier="shape2" name="shape64.dragpoint1" toShape="shape62" x="416.0" y="536.0"/>
          </dragpoints>
        </shape>
        <shape image="returndocuments_icon" name="shape65" shapetype="returndocuments" x="1008.0" y="48.0">
          <configuration>
            <returndocuments/>
          </configuration>
          <dragpoints/>
        </shape>
      </shapes>
    </process>
  </bns:object>
  <bns:processOverrides/>
</bns:Component>
